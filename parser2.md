
## パーサー（Parse）の属性

<br>


### Parse の属性




プロパティ名         | プロパティの型   |アクセス | 内容
---------------------|------------------|---------|------------------------------
OPT_*<オプション名>* |Opset             |参照     |オプション情報（Opset）を返す
OPT_                 |Dict[str, Opset]  |参照     |Dict形式でオプション情報（Opset）を返す
params               |List[str]         |参照     |入力されたコマンド引数のリストを返す
remain               |List[str]         |参照     |残りのコマンドラインを返す
is_error             |bool              |参照     |解析エラーで中断時、Trueになる
option_attrs         |List[str]         |参照     |オプション属性リストを取得する

<br>
### プロパティの説明

   - OPT_*<オプション名>*
      * 定義したオプション情報の「オプション名」を使用して属性が生成される。
      * "OPT_" の部分は、Parseの引数 option_name_prefix により変更可能。
      * 該当のオプション名の「オプション情報」を返す。
      * 「オプション情報」のプロパティは次項を参照。  
        　ex) ```OPT_size.value```　でオプション名 "size" の格納値を参照する
   - OPT_
      * オプション名を keyにした Dict形式のオプション情報を返す。
      * "OPT_" のプロパティ名は固定。
      * 自動的に生成された属性（プロパティ）を使いたくない場合は、こちらを使用してください。
      * 「オプション情報」のプロパティは次項を参照。  
        　ex) ```OPT_["size"].value```　でオプション名 "size" の格納値を参照する
  - params
      * 入力されたコマンド引数（文字列）のリストを返す。
  - remain
      * 解析モード（Parse() の smode パラメータ）の指定により、コマンドラインの解析が途中で終了した場合に、残りのコマンドラインを返す。
      * 必要であれば、これをさらに Parse() することもできる。
  - is_error
      * コマンドラインの解析がエラーになった場合に True になる。成功すれば False のまま。
      * 本モジュールでは、解析エラー時の処理はモジュール側で行わないので、呼び出し側プログラムで is_error を参照して処理（メッセージの表示とか、異常終了とか）する必要がある。
  - option_attrs
      * Parse() 内で生成されたオプション属性名（OPT_*<オプション名>* ）のリストを取得する。

<br>

メソッド名           | 戻り値の型   | 内容
---------------------|---------------|------------------------------
__error_message      |str            |エラー理由を渡して、エラーメッセージを作成する
get_errormessage     |str            |解析エラー時のエラーメッセージを取得する
make_options         |str            |該当オプション名の、すべてのオプションリストを取得する
get_optionlist       |List[List[str]] |表示用のオプション一覧を取得する


<br>
### 引数の説明

   - ```def get_errormessage(self, level: int = 0) -> str:```
      * 解析エラー時のエラーメッセージを取得する。
      * ```level <= 0 ```で標準のエラーメッセージ（１行）のみを返す。
      * ```level >= 1 ```で標準のエラーメッセージに加えて、変換エラー等の詳細メッセージを複数行（エラーの数分）に渡って生成する。
      * level を省略時は、0 と同じ。
   - ```def make_options(self, op: Any) -> str:```
      * op で指定されるオプション属性のすべてのオプション文字列を、カンマ（,）と１文字の空白で区切った文字列にして返す。（オプション文字列の表示用）

<br>
<br>
<br>


### オプション情報のプロパティ
プロパティ名  | プロパティの型      | 用途       | 内容
--------------|---------------------|------------|------------------------------
l_options     |List[str]            |定義        |ロング名オプション文字列
s_options     |List[str]            |定義        |１文字オプション文字列
comment       |str                  |定義        |オプションのコメント
acomment      |str                  |定義        |オプション引数のコメント
afunc         |Optional[List[Any]]  |定義        |変換用関数等
atype         |*\<cl_parse>.* At    |定義        |アクションタイプ
isEnable      |bool                 |解析結果    |オプションが指定されたかどうか
value         |Any                  |解析結果    |オプションの値

<br>

### 引数の説明

   - args
      * 解析するコマンドラインが格納されている、文字列リストを指定する。
      * sys.argv を渡すと、先頭のプログラム名もコマンド引数として解釈する。不都合であれば、sys.argv[1:] を指定してください。
   - options
      * オプション情報を格納したリストを指定する。
      * オプション情報の格納方法、内容の説明は別途。